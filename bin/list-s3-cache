#! /app/vendor/node/bin/node

var s3 = new (require('aws-sdk')).S3({params:{Bucket: process.env.S3_BUCKET_NAME}});

var prefix = '';
if (process.env.S3_PREFIX_KEY) {
		prefix = process.env.S3_PREFIX_KEY + '/' + prefix;
}

s3.listObjects({ Prefix: prefix }, function(err, data) {
		console.log('S3 Object List');
	  if (err) console.log(err, err.stack); // an error occurred
		else {
			data.Contents.forEach(function(item) {
					console.log(item);
			});

		}
});
